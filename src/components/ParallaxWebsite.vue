<template>
  <div id="luxy" class="wrapp">
    <!-- div .header -->
    <header class="header">
      <h1 class="title" data-splitting>
        <span class="title_paralax">Parallax effect</span
        ><span class="stroke">on gsap</span>
      </h1>
      <div class="header__img">
        <img src="../assets/1.jpg" alt="1" />
      </div>
      <div class="header__marq">
        <div class="header__marq-wrapp">
          <span class="header__marq-txt"
            >discuss your ideas
            <span class="header__marq-star">
              <img src="../assets/star.svg" alt="" />
            </span>
          </span>
          <span class="header__marq-txt"
            >discuss your ideas
            <span class="header__marq-star">
              <img src="../assets/star.svg" alt="" />
            </span>
          </span>
          <span class="header__marq-txt"
            >discuss your ideas
            <span class="header__marq-star">
              <img src="../assets/star.svg" alt="" />
            </span>
          </span>
          <span class="header__marq-txt"
            >discuss your ideas
            <span class="header__marq-star">
              <img src="../assets/star.svg" alt="" />
            </span>
          </span>
        </div>
      </div>
    </header>

    <main class="main">
      <!-- div .about -->
      <section class="about">
        <div class="about__wrapp">
          <div class="about__img">
            <img src="../assets/2.jpg" alt="2" />
          </div>
          <div class="about__txt">
            <h2 class="section-title">
              abo<span class="stroke">ut</span>
              <span class="section-title__square"></span>
            </h2>
            <p class="about__p">
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque
              esse aspernatur fugit debitis quisquam. Quia exercitationem ipsum
              voluptas voluptatum hic enim quo provident culpa possimus
              cupiditate! Dolorum quae doloremque cum rerum ipsam inventore
              beatae, at odit, velit, aspernatur minima! Corporis.
            </p>
          </div>
        </div>
      </section>

      <!-- div .benefits -->
      <section class="benefits">
        <div class="content">
          <h2 class="section-title">
            benef<span class="stroke">its</span>
            <span class="section-title__square"></span>
          </h2>

          <ul class="benefits__list">
            <li class="benefits__item">
              <span class="benefits__num" data-speed="-200">/01</span>
              <p class="benefits__p">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis,
                quas.
              </p>
            </li>
            <li class="benefits__item">
              <span class="benefits__num" data-speed="-150">/02</span>
              <p class="benefits__p">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis,
                quas.
              </p>
            </li>
            <li class="benefits__item">
              <span class="benefits__num" data-speed="-150">/03</span>
              <p class="benefits__p">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis,
                quas.
              </p>
            </li>
            <li class="benefits__item">
              <span class="benefits__num" data-speed="-150">/04</span>
              <p class="benefits__p">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis,
                quas.
              </p>
            </li>
            <li class="benefits__item">
              <span class="benefits__num" data-speed="-110">/05</span>
              <p class="benefits__p">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis,
                quas.
              </p>
            </li>
            <li class="benefits__item">
              <span class="benefits__num" data-speed="-200">/06</span>
              <p class="benefits__p">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis,
                quas.
              </p>
            </li>
          </ul>
        </div>
      </section>

      <!-- div .work -->
      <section class="work">
        <div class="content">
          <h2 class="section-title">
            portfo<span class="stroke">lio</span>
            <span class="section-title__square"></span>
          </h2>
        </div>

        <div class="work__wrapp">
          <div class="work__item" data-speed="-300">
            <span class="work__item-num" data-speed="-1000">/001</span>
            <div class="work__item-img">
              <img src="../assets/3.jpg" alt="3" />
            </div>
          </div>
          <div class="work__item" data-speed="-600">
            <span class="work__item-num" data-speed="-500">/002</span>
            <div class="work__item-img">
              <img src="../assets/4.jpg" alt="4" />
            </div>
          </div>
          <div class="work__item" data-speed="-700">
            <span class="work__item-num" data-speed="-700">/003</span>
            <div class="work__item-img">
              <img src="../assets/5.jpg" alt="5" />
            </div>
          </div>
          <div class="work__item" data-speed="-400">
            <span class="work__item-num" data-speed="-200">/004</span>
            <div class="work__item-img">
              <img src="../assets/6.jpg" alt="6" />
            </div>
          </div>
        </div>
      </section>

      <!-- div .serv -->
      <section class="serv">
        <div class="content">
          <h2 class="section-title">
            servic<span class="stroke">es</span>
            <span class="section-title__square"></span>
          </h2>

          <div class="serv__list">
            <div class="serv__item">
              <span class="serv__item-arrow" data-speed="500">
                <img src="../assets/arrow.svg" alt="" />
              </span>
              <div class="serv__item-txt">
                <span class="serv__item-text">/Graphic Design</span>
              </div>
            </div>
            <div class="serv__item">
              <span class="serv__item-arrow" data-speed="400">
                <img src="../assets/arrow.svg" alt="" />
              </span>
              <div class="serv__item-txt">
                <span class="serv__item-text">/UX/UI Design</span>
              </div>
            </div>
            <div class="serv__item">
              <span class="serv__item-arrow" data-speed="800">
                <img src="../assets/arrow.svg" alt="" />
              </span>
              <div class="serv__item-txt">
                <span class="serv__item-text">/Web Design</span>
              </div>
            </div>
            <div class="serv__item">
              <span class="serv__item-arrow" data-speed="600">
                <img src="../assets/arrow.svg" alt="" />
              </span>
              <div class="serv__item-txt">
                <span class="serv__item-text">/Brend Design</span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- div .footer -->
    <footer class="footer">
      <div class="footer__div">
        <span data-speed="-300">a</span>
        <span data-speed="100">p</span>
        <span data-speed="300">p</span>
        <span data-speed="-300">r</span>
        <span data-speed="350">o</span>
        <span data-speed="200">v</span>
        <span data-speed="-310">e</span>
        <span data-speed="200">c</span>
        <span data-speed="-340">o</span>
        <span data-speed="-100">d</span>
        <span data-speed="300">e</span>
      </div>
    </footer>
  </div>
</template>

<script>
import Splitting from "../js/splitting.js";
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import luxy from "../js/luxy.js";

export default {
  name: "LuxyComponent",
  mounted() {
    Splitting();
    luxy.init();
    gsap.registerPlugin(ScrollTrigger);

    // Başlangıç Animasyonları
    const gTl = gsap.timeline();
    gTl
      .from(".title .char", {
        opacity: 0,
        yPercent: 130,
        stagger: 0.06,
        ease: "back.out",
      })
      .to(
        ".header__img",
        {
          clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
          scale: 1,
          ease: "expo.out",
          duration: 2,
        },
        "-=1"
      )
      .from(
        ".header__marq",
        {
          opacity: 0,
          yPercent: 100,
          ease: "expo.out",
          duration: 2,
        },
        "-=1.5"
      );

    // Dönen Kareler
    const gsapSq = gsap.utils.toArray(".section-title__square");
    gsapSq.forEach((gSq) => {
      const rotateAnim = gsap.from(gSq, {
        rotation: 720,
        duration: 3,
      });
      ScrollTrigger.create({
        trigger: gSq,
        animation: rotateAnim,
        start: "top bottom",
        scrub: 1.9,
      });
    });

    // Animasyon Fonksiyonları
    const createScrollAnimation = (target, props, trigger, extraProps = {}) => {
      gsap.to(target, {
        scrollTrigger: {
          trigger: trigger,
          start: "top top",
          scrub: 1.9,
          ...extraProps,
        },
        ...props,
      });
    };

    const headerAnimations = () => {
      createScrollAnimation(".title_paralax", { yPercent: -150 }, ".header");
      createScrollAnimation(".header .stroke", { xPercent: 50 }, ".header");
      createScrollAnimation(".header__img", { xPercent: -70 }, ".header");
      createScrollAnimation(".header__img img", { scale: 1.3 }, ".header");
      createScrollAnimation(
        ".header__marq-wrapp",
        { xPercent: -50 },
        ".header"
      );
      createScrollAnimation(
        ".header__marq-star img",
        { rotate: -720 },
        ".header"
      );
    };

    const aboutAnimations = () => {
      createScrollAnimation(".about__img", { yPercent: 80 }, ".about", {
        start: "top bottom",
      });
      createScrollAnimation(".about__img img", { scale: 1.6 }, ".about", {
        start: "top bottom",
      });
      createScrollAnimation(".about__txt", { yPercent: 50 }, ".about__wrapp", {
        start: "top bottom",
      });
    };

    const benefitsAnimations = () => {
      gsap.from(".benefits__num", {
        x: (i, el) => 1 - parseFloat(el.getAttribute("data-speed")),
        scrollTrigger: {
          trigger: ".benefits__list",
          start: "top bottom",
          scrub: 1.9,
        },
      });
    };

    const portfolioAnimations = () => {
      gsap.from([".work__item", ".work__item-num"], {
        y: (i, el) => 1 - parseFloat(el.getAttribute("data-speed")),
        scrollTrigger: {
          trigger: ".work",
          start: "top bottom",
          scrub: 1.9,
        },
      });
      createScrollAnimation(
        ".work__item-img img",
        { scale: 1.6 },
        ".work__wrapp",
        { start: "top bottom" }
      );
    };

    const servicesAnimations = () => {
      gsap.from(".serv__item-arrow", {
        x: (i, el) => 1 - parseFloat(el.getAttribute("data-speed")),
        scrollTrigger: {
          trigger: ".serv__list",
          start: "top bottom",
          scrub: 1.9,
        },
      });
    };

    const footerAnimations = () => {
      gsap.from(".footer__div span", {
        y: (i, el) => 1 - parseFloat(el.getAttribute("data-speed")),
        opacity: 0,
        scrollTrigger: {
          trigger: ".footer",
          start: "top bottom",
          end: "bottom bottom",
          scrub: 1.9,
        },
      });
    };

    // Animasyonları Başlatma
    headerAnimations();
    aboutAnimations();
    benefitsAnimations();
    portfolioAnimations();
    servicesAnimations();
    footerAnimations();
  },
};
</script>
<style>
@import url(../assets/styles/normalize.css);
@import url(../assets/styles/style.css);
</style>
